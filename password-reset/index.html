<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Signing you in...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

   <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Your Supabase config -->
  <script src="/supabase-config.js"></script>

</head>

<body style="font-family:sans-serif;text-align:center;padding-top:40px;">
  <h2>Signing you in securely...</h2>

  <script>
    async function loginFromMagicLink() {

try
 {
    
final
 got = 
await
 supabaseClient.auth.onAuthStateChange((event, session) => {
    if (event === 'SIGNED_IN') {
      // session is available
      // redirect to app home (clean URL)
      window.location.replace('/');
    } else if (event === 'SIGNED_OUT') {
      // handle sign out
    }
  });
    
// getSessionFromUrl returns a SessionResponse with session if successful

    
if
 (got.session != 
null
) {
      
// user is signed in, update UI

    } 
else
 
if
 (got.error != 
null
) {
      
// handle verification error

    }
  } 
catch
 (e) {
    
// fallback: call verifyOtp if you have token/hash values

  }
     
    }

    loginFromMagicLink();
  </script>
</body>
</html>